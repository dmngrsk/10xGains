<txg-main-layout title="Settings" [loadingSignal]="isLoading">
  <div class="p-4">
    @if (viewModel(); as viewModel) {
      @if (viewModel.error; as error) {
        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6" role="alert">
          <strong class="font-bold">Error!</strong>
          <span class="block sm:inline"> {{ error }}</span>
        </div>
      } @else if (!viewModel.isLoading || initialLoadFinished()) {
        <div class="grid grid-cols-1 gap-6">
          <txg-profile-settings-card
            [profile]="viewModel.profile"
            (profileSaved)="onProfileSaved($event)">
          </txg-profile-settings-card>

          <txg-account-settings-card
            (passwordChanged)="onPasswordChanged()"
            (signedOut)="onSignedOut()">
          </txg-account-settings-card>
        </div>
      }
    }
  </div>
</txg-main-layout>
