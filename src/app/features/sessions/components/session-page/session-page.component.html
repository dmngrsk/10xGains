<txg-main-layout title="Active Session" [loadingSignal]="isLoading" backNavigation="/home">
  <div class="p-4">
    @if (errorSignal() !== null) {
      <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
        <strong class="font-bold">Error!</strong>
        <span class="block sm:inline">{{ errorSignal() }}</span>
      </div>
    }

    @if (session(); as session) {
      <txg-session-header [metadata]="session.metadata!" />

      <div class="mt-4">
        <txg-session-exercise-list
          [exercises]="exercises()"
          [isReadOnly]="isReadOnly()"
          (setClicked)="handleSetClicked($event)"
          (setLongPressed)="handleSetLongPressed($event)"
          (setAdded)="handleSetAdded($event)"
        ></txg-session-exercise-list>
      </div>

      <div class="bottom-spacer h-16"></div>

      @if (!isReadOnly()) {
        <txg-session-timer
          [resetTrigger]="timerResetTrigger"
          [allExercisesComplete]="allExercisesAndSetsComplete()"
          (sessionCompleted)="handleSessionCompleted()"
        ></txg-session-timer>
      }
    }
  </div>
</txg-main-layout>
